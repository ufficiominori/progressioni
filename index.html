<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Calcolo punteggio (in aggiornamento) – Progressione Area Funzionari/EQ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; margin: 10px; }
fieldset { margin-bottom: 15px; border-radius: 6px; border: 1px solid #ccc; padding: 10px; }
#fsProcedura { background-color: #e6f2ff; }
#fsPerformance { background-color: #e6ffe6; }
#fsEsperienza { background-color: #fff0e6; }
#fsTitoli { background-color: #fff5e6; }
#fsCompetenze { background-color: #f3e6ff; }
legend { font-weight: bold; }
label { display: block; margin-top: 5px; }
input[type="number"], select {
  width: 50%; max-width: 260px; font-size: 1.2rem; padding: 6px;
}
button { padding: 10px 16px; font-size: 1rem; cursor: pointer; }
.block-score { margin-top: 5px; font-style: italic; }

.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.45);
  display: none; justify-content: center; align-items: center; z-index: 999;
}
.modal {
  background: #fff; border-radius: 8px; max-width: 480px;
  width: 90%; padding: 20px;
}
.modal h3 { margin-top: 0; }
.modal-buttons { display: flex; gap: 10px; justify-content: flex-end; }
.btn-primary { background: #007bff; color: #fff; border: none; }
.btn-secondary { background: #6c757d; color: #fff; border: none; }
</style>
</head>

<body>

<h2>Calcolo punteggio (in aggiornamento) – Area Funzionari e dell’Elevata Qualificazione</h2>
<h3>a cura del Mar. Ord. Carmine Santangelo</h3>
<h4>N.B.: il programma è in fase di aggiornamento e verifica, pertanto potrebbe riportare risultati errati</h4>

<fieldset id="fsProcedura">
<legend>TIPO DI PROCEDURA</legend>
<label><input type="radio" name="procedura" value="art15" checked> Procedura comparativa ex art. 15 CCNL</label>
<!-- VERIFICARE <label><input type="radio" name="procedura" value="art13"> Procedura straordinaria ex art. 13 CCNL</label> --> 
</fieldset>

<!-- A - PERFORMANCE -->
<fieldset id="fsPerformance">
<legend>A – VALUTAZIONE DELLA PERFORMANCE (solo art. 15 – max 20)</legend>
<label>Punteggio performance (0–20):
<input type="number" id="performance" min="0" max="20" step="0.1" value="0"></label>
<div class="block-score" id="scorePerformance"></div>
</fieldset>

<!-- B - TITOLI -->
<fieldset id="fsTitoli">
<legend>B – TITOLI E COMPETENZE PROFESSIONALI (max 60)</legend>

<h4>Titoli di studio (max 30 punti)</h4>

<label>Tipo di titolo di accesso (max 10 punti):
<select id="tipoTitoloAccesso">
<option value="diploma">Diploma di scuola secondaria di II grado</option>
<option value="L">Laurea triennale (L)</option>
<option value="LM">Laurea magistrale/DL/LS/LM</option>
</select></label>

<label>Voto del titolo di accesso:
<input type="number" id="votoAccesso" min="60" max="110" step="0.5" value="110"></label>
<label><input type="checkbox" id="lodeAccesso"> con lode</label>
<div class="block-score" id="scoreVotoAccesso"></div>

<h4>Titoli ulteriori (oltre il titolo di accesso) (max 20 punti)</h4>
<label>Numero di lauree triennali ulteriori:
<input type="number" id="numLTriennali" min="0" step="1" value="0"></label>
<label>Numero di lauree DL/LS/LM ulteriori:
<input type="number" id="numLaureeLM" min="0" step="1" value="0"></label>
<label>Numero di Master universitari di I livello:
<input type="number" id="numMaster1" min="0" step="1" value="0"></label>
<label>Numero di Master di II livello / Dottorati / Scuole di Specializzazione:
<input type="number" id="numMaster2" min="0" step="1" value="0"></label>
<div class="block-score" id="scoreTitoliUlteriori"></div>

<h4>Competenze professionali (max 30 punti)</h4>
<label>Anno di assunzione (es. 2000) (max 25 punti):
<input type="number" id="annoAssunzione" min="1900" max="2025" value="2000"></label>

<label>Abilitazione ad albo professionale (max 3 punti):
<input type="number" id="abilitazione" min="0" max="1" value="0"></label>

<label>Numero certificazioni informatiche (0,25 punti ciascuna – max 0,5 punti):
<input type="number" id="numCertInformatica" min="0" value="0"></label>

<label>Numero certificazioni linguistiche QCER ≥ B1 (0,25 punti ciascuna – max 0,5 punti):
<input type="number" id="numCertLingue" min="0" value="0"></label>

<label>Idoneità in selezioni a tempo indeterminato (max 1 punto):
<input type="number" id="idoneitaTI" min="0" max="1" value="0"></label>
</fieldset>

<!-- C - INCARICHI -->
<fieldset id="fsCompetenze">
<legend>C – INCARICHI (max 20 punti)</legend>
<label>Numero incarichi formali attinenti al profilo:
<input type="number" id="numIncarichi" min="0" value="0"></label>

<div class="block-score" id="scoreCompetenze"></div>
</fieldset>

<button onclick="calcola()">Calcola punteggio</button>

<div class="modal-overlay" id="modalOverlay">
<div class="modal">
<h3>Risultato del calcolo</h3>
<div id="modalTotale"></div>
<div id="modalDettagli"></div>
<div class="modal-buttons">
<button class="btn-secondary" onclick="chiudiModal()">Chiudi</button>
</div>
</div>
</div>

<script>
function clamp(v,min,max){return Math.min(Math.max(v,min),max);}
function chiudiModal(){document.getElementById('modalOverlay').style.display='none';}
function mostraModal(t,d){
document.getElementById('modalTotale').innerHTML="<strong>"+t+"</strong>";
document.getElementById('modalDettagli').innerHTML=d;
document.getElementById('modalOverlay').style.display='flex';
}

function calcola(){
const procedura=document.querySelector('input[name="procedura"]:checked').value;

// A – PERFORMANCE
let sezioneA=0;
if(procedura==="art15"){
sezioneA=clamp(+document.getElementById('performance').value,0,20);
document.getElementById('scorePerformance').textContent="Punteggio performance: "+sezioneA.toFixed(2);
}

// B.1 – VOTO ACCESSO
const tipo=document.getElementById('tipoTitoloAccesso').value;
const voto=+document.getElementById('votoAccesso').value;
const lode=document.getElementById('lodeAccesso').checked;
let B12=0;

if(tipo==="LM"){
if(voto>=110&&lode)B12=10;
else if(voto>=103)B12=9;
else if(voto>=90)B12=8;
else if(voto>=80)B12=7.5;
else if(voto>=70)B12=7;
else B12=6.5;
}

B12=clamp(B12,0,10);
document.getElementById('scoreVotoAccesso').textContent="Punteggio titolo di accesso: "+B12.toFixed(2);

// B.2 – TITOLI ULTERIORI
let B13=
(+document.getElementById('numLTriennali').value)*5+
(+document.getElementById('numLaureeLM').value)*10+
Math.min(+document.getElementById('numMaster1').value*1.5,3)+
Math.min(+document.getElementById('numMaster2').value*3,7);
B13=clamp(B13,0,20);
document.getElementById('scoreTitoliUlteriori').textContent="Punteggio titoli ulteriori: "+B13.toFixed(2);

// B.3 – COMPETENZE
const anno=+document.getElementById('annoAssunzione').value;
let anniUtili=Math.max(0,2025-anno-3);
let puntiEsperienza=clamp(anniUtili,0,25);

let B2=
puntiEsperienza+
(+document.getElementById('abilitazione').value?3:0)+
Math.min(+document.getElementById('numCertInformatica').value*0.25,0.5)+
Math.min(+document.getElementById('numCertLingue').value*0.25,0.5)+
Math.min(+document.getElementById('idoneitaTI').value,1);

B2=clamp(B2,0,30);

// C – INCARICHI
let sezioneC=clamp(+document.getElementById('numIncarichi').value,0,20);

// B – TOTALE
const sezioneB=clamp(B12+B13+B2,0,60);
const totale=clamp(sezioneA+sezioneB+sezioneC,0,100);

mostraModal(
"Totale stimato (art. 15): "+totale.toFixed(2)+" / 100",
`
<ul>
<li>Sezione A – Performance: ${sezioneA.toFixed(2)}</li>
<li>Sezione B – Titoli e competenze: ${sezioneB.toFixed(2)}</li>
<li>Sezione C – Incarichi: ${sezioneC.toFixed(2)}</li>
</ul>
`
);
}
</script>

</body>
</html>
